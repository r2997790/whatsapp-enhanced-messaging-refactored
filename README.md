# ğŸ“± WhatsApp Enhanced Messaging - Refactored\n\nA professional, modular WhatsApp bulk messaging application built with Node.js, featuring contacts management, message templates, and a modern web interface.\n\n## âœ¨ Features\n\n### ğŸš€ Core Functionality\n- **WhatsApp Integration**: Seamless connection using whatsapp-web.js\n- **Bulk Messaging**: Send messages to multiple contacts efficiently\n- **Message Queue**: Smart queuing system with retry logic\n- **Real-time Updates**: Live status updates via Socket.IO\n\n### ğŸ‘¥ Contact Management\n- **Contact Database**: Store and manage contact information\n- **CSV Import/Export**: Bulk import contacts from CSV files\n- **Search & Filter**: Find contacts quickly with advanced filtering\n- **Contact Groups**: Organize contacts into custom groups\n- **Tags System**: Tag contacts for better organization\n\n### ğŸ“ Message Templates\n- **Template Engine**: Create reusable message templates\n- **Variable Substitution**: Dynamic content with {{variable}} syntax\n- **Template Categories**: Organize templates by category\n- **Usage Analytics**: Track template usage statistics\n- **Quick Templates**: Pre-built templates for common scenarios\n\n### ğŸ¨ Modern Interface\n- **Responsive Design**: Works on desktop, tablet, and mobile\n- **Tabbed Interface**: Organized sections for different functions\n- **Real-time Stats**: Live messaging statistics and progress\n- **Toast Notifications**: User-friendly notifications\n- **Dark/Light Theme**: Modern UI with Tailwind CSS\n\n### ğŸ”§ Technical Features\n- **Modular Architecture**: Small, focused files for easy maintenance\n- **RESTful API**: Clean API design with proper error handling\n- **File Upload**: Support for CSV and media file uploads\n- **Logging**: Comprehensive logging with Winston\n- **Security**: Rate limiting, input validation, and security headers\n- **Docker Ready**: Containerized deployment support\n\n## ğŸ—ï¸ Architecture\n\nThe application follows a modular architecture with clear separation of concerns:\n\n```\nsrc/\nâ”œâ”€â”€ config/          # Configuration files\nâ”œâ”€â”€ services/        # Business logic services\nâ”œâ”€â”€ routes/          # API route handlers\nâ”œâ”€â”€ utils/           # Utility functions\nâ”œâ”€â”€ socket/          # Socket.IO event handlers\nâ””â”€â”€ server.js        # Main application entry point\n\npublic/\nâ”œâ”€â”€ index.html       # Main HTML interface\nâ””â”€â”€ js/\n    â””â”€â”€ app.js       # Frontend JavaScript application\n```\n\n### ğŸ”§ Services\n- **WhatsAppService**: Manages WhatsApp client and messaging\n- **ContactsService**: Handles contact CRUD operations\n- **TemplatesService**: Template management and rendering\n\n### ğŸ›£ï¸ API Routes\n- **WhatsApp Routes** (`/api/whatsapp`): Messaging and status endpoints\n- **Contacts Routes** (`/api/contacts`): Contact management\n- **Templates Routes** (`/api/templates`): Template operations\n- **Upload Routes** (`/api/upload`): File upload handling\n\n## ğŸš€ Quick Start\n\n### Prerequisites\n- Node.js 16+ \n- npm or yarn\n- Chrome/Chromium (for WhatsApp Web)\n\n### Installation\n\n1. **Clone the repository**\n```bash\ngit clone https://github.com/r2997790/whatsapp-enhanced-messaging-refactored.git\ncd whatsapp-enhanced-messaging-refactored\n```\n\n2. **Install dependencies**\n```bash\nnpm install\n```\n\n3. **Setup environment variables**\n```bash\ncp .env.example .env\n# Edit .env with your preferred settings\n```\n\n4. **Start the application**\n```bash\n# Development mode\nnpm run dev\n\n# Production mode\nnpm start\n```\n\n5. **Open your browser**\n```\nhttp://localhost:3000\n```\n\n6. **Connect WhatsApp**\n- Scan the QR code with your WhatsApp mobile app\n- Go to WhatsApp Settings â†’ Linked Devices â†’ Link a Device\n\n## ğŸ“‹ Usage Guide\n\n### 1. Connecting WhatsApp\n1. Open the application in your browser\n2. Scan the QR code with WhatsApp on your phone\n3. Wait for the \"Connected\" status\n\n### 2. Managing Contacts\n1. Go to the **Contacts** tab\n2. Add contacts manually or import from CSV\n3. Use tags and groups to organize contacts\n4. Search and filter contacts as needed\n\n### 3. Creating Templates\n1. Switch to the **Templates** tab\n2. Create new templates with variables (e.g., `Hello {{name}}`)\n3. Organize templates by category\n4. Use templates in bulk messaging\n\n### 4. Sending Messages\n1. **Single Message**: Use the Messaging tab for one-off messages\n2. **Bulk Campaign**: Select template, upload CSV, start campaign\n3. **Monitor Progress**: Watch real-time stats and progress\n\n### 5. CSV Format\nYour CSV file should have these columns:\n```csv\nname,phone,email,tags\nJohn Doe,+1234567890,john@example.com,customer;vip\nJane Smith,+0987654321,jane@example.com,lead;prospect\n```\n\n## ğŸ”§ Configuration\n\n### Environment Variables\n```bash\n# Server\nPORT=3000\nNODE_ENV=development\n\n# Logging\nLOG_LEVEL=info\n\n# WhatsApp\nWHATSAPP_SESSION_NAME=whatsapp-enhanced\n\n# Security\nRATE_LIMIT_WINDOW_MS=900000\nRATE_LIMIT_MAX=100\nMAX_FILE_SIZE=10485760\n```\n\n### WhatsApp Configuration\nThe application uses sensible defaults for WhatsApp Web integration:\n- Headless Chrome with optimized flags\n- Local session storage for persistent login\n- Configurable message delays and retry logic\n\n## ğŸš¢ Deployment\n\n### Railway Deployment\n\n1. **Fork this repository**\n\n2. **Connect to Railway**\n   - Sign up at [Railway.app](https://railway.app)\n   - Connect your GitHub account\n   - Deploy from your forked repository\n\n3. **Configure Environment Variables**\n   - Set `NODE_ENV=production`\n   - Configure other variables as needed\n\n4. **Deploy**\n   - Railway will automatically build and deploy\n   - Your app will be available at the provided URL\n\n### Docker Deployment\n\n```bash\n# Build the image\ndocker build -t whatsapp-enhanced .\n\n# Run the container\ndocker run -p 3000:3000 \\\n  -e NODE_ENV=production \\\n  -v $(pwd)/data:/app/data \\\n  -v $(pwd)/sessions:/app/sessions \\\n  whatsapp-enhanced\n```\n\n### Manual Deployment\n\n```bash\n# Install dependencies\nnpm ci --production\n\n# Set environment\nexport NODE_ENV=production\nexport PORT=3000\n\n# Start with PM2 (recommended)\nnpm install -g pm2\npm2 start src/server.js --name whatsapp-enhanced\n\n# Or start directly\nnpm start\n```\n\n## ğŸ›¡ï¸ Security\n\n- **Rate Limiting**: API endpoints are rate-limited\n- **Input Validation**: All inputs are validated and sanitized\n- **Security Headers**: Helmet.js provides security headers\n- **File Upload Limits**: Configurable file size and type restrictions\n- **CORS Protection**: Configurable CORS settings\n\n## ğŸ“Š Monitoring\n\n### Logs\n- Application logs are written to `./logs/`\n- Different log levels: error, warn, info, debug\n- Separate files for errors and combined logs\n\n### Health Check\n```bash\ncurl http://localhost:3000/api/health\n```\n\n### Stats Endpoint\n```bash\ncurl http://localhost:3000/api/whatsapp/status\n```\n\n## ğŸ¤ Contributing\n\n1. Fork the repository\n2. Create a feature branch: `git checkout -b feature/amazing-feature`\n3. Commit your changes: `git commit -m 'Add amazing feature'`\n4. Push to the branch: `git push origin feature/amazing-feature`\n5. Open a Pull Request\n\n### Development Guidelines\n- Follow the modular architecture pattern\n- Keep files small and focused\n- Add proper error handling\n- Include JSDoc comments for functions\n- Test your changes thoroughly\n\n## ğŸ“ API Documentation\n\n### WhatsApp Endpoints\n- `GET /api/whatsapp/status` - Get connection status\n- `POST /api/whatsapp/send-message` - Send single message\n- `POST /api/whatsapp/send-bulk` - Send bulk messages\n- `POST /api/whatsapp/logout` - Logout from WhatsApp\n\n### Contacts Endpoints\n- `GET /api/contacts` - List all contacts\n- `POST /api/contacts` - Create new contact\n- `PUT /api/contacts/:id` - Update contact\n- `DELETE /api/contacts/:id` - Delete contact\n- `POST /api/contacts/import` - Import contacts from CSV\n\n### Templates Endpoints\n- `GET /api/templates` - List all templates\n- `POST /api/templates` - Create new template\n- `PUT /api/templates/:id` - Update template\n- `DELETE /api/templates/:id` - Delete template\n- `POST /api/templates/:id/render` - Render template with variables\n\n## ğŸ” Troubleshooting\n\n### Common Issues\n\n1. **QR Code not appearing**\n   - Check browser console for errors\n   - Ensure port 3000 is not blocked\n   - Try refreshing the page\n\n2. **WhatsApp disconnects frequently**\n   - Check your internet connection\n   - Ensure WhatsApp is not open on another device\n   - Clear browser cache and cookies\n\n3. **Messages not sending**\n   - Verify phone numbers are in international format\n   - Check WhatsApp connection status\n   - Review error logs in `./logs/`\n\n4. **CSV import fails**\n   - Ensure CSV has required columns: name, phone\n   - Check phone number formats\n   - Verify file size is under 10MB\n\n### Debug Mode\n```bash\nLOG_LEVEL=debug npm start\n```\n\n## ğŸ“„ License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n\n## âš ï¸ Disclaimer\n\nThis application is for educational and legitimate business purposes only. Users are responsible for:\n- Complying with WhatsApp's Terms of Service\n- Obtaining proper consent for messaging\n- Following local privacy and communication laws\n- Not using for spam or unsolicited messages\n\n## ğŸ™ Acknowledgments\n\n- [whatsapp-web.js](https://github.com/pedroslopez/whatsapp-web.js) - WhatsApp Web API\n- [Socket.IO](https://socket.io/) - Real-time communication\n- [Express.js](https://expressjs.com/) - Web framework\n- [Tailwind CSS](https://tailwindcss.com/) - CSS framework\n- [Winston](https://github.com/winstonjs/winston) - Logging library\n\n---\n\n**Built with â¤ï¸ for the community**\n\nIf you find this project helpful, please give it a â­ star on GitHub!"